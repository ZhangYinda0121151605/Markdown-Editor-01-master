# 总体设计
## 1 引言
本文是Markdown Editor系统总体设计说明书。      

### 1.1 编写目的
本阶段要在系统需求分析的基础上，对Markdown Editor做进一步的总体设计需求。      
它主要解决以下三方面的问题：     
- 确定软件的结构---有哪几个模块组成，调用关系，各模块间的借口；     
- 数据结构设计---确定数据库的模式，子模式，数据的完整性，安全性设计；     
- 文档的书写；      
预期读者是：软件管理人员，开发人员。          

### 1.2 定义
用户：该系统的使用者；      
实体：现实生活中的一个个体；      
联系：即两个或者多个实体之间的相互关系；      
属性：实体或联系之间产生的某种特性、特征统称为属性；       
需求：用户解决问题或达到目标所需的条件或功能；系统或系统部件要满足合同、标准，规范或其它正式规定文档所需具有的条件或权能；      
需求分析：包括提炼，分析和仔细审查已收集到的需求，以确保所有的风险承担者都明其含义并找出其中的错误，遗憾或其它不足的地方；      
模块的独立性：是指软件系统中每个模块只涉及软件要求的具体的子功能，而和软件系统中其他的模块的接口是简单的；                
项目：Markdown Editor开发项目的简称。      

## 2 总体设计
用户通过基于Windows的Markdown编辑器进行书写，预览和导出。Markdown编辑器从用户键盘读入待转换的Markdown文本，通过相应的转换模块进行文法转换，实现预览功能。项目是基于Windows的PC端Markdown编辑器，对用户使用、网络条件、运行环境没有太多要求。      
在系统的功能实现上，可以分为以下几个部分：      
- 对用户输入的Markdown文本进行转换并预览；      
- 用户输入目录，对Markdown文本以文件形式进行保存；      
为了保证系统能够长期、安全、稳定、可靠、高效的运行，Markdown编辑器应该满足以下的性能需求：
- 系统处理的准确性和及时性;          
- 系统的开放性和系统的可扩充性;          
- 系统的易用性和易维护性;               

## 3 系统设计
### 3.1 功能模块
软件主要分为标题、引用和列表模块，段落和代码模块，强调和标记模块，链接和图片模块和导出文件模块。           
![YuHang](https://github.com/YuHang0121151624/Markdown-Editor-01/blob/master/img/7.jpg)       

### 3.2 系统管理员功能需求
- Markdown文本转换：根据用户输入的Markdown文本，提供转换后的预览；         
- 导出文件管理：根据用户的保存目录，导出Markdown文件；        

### 3.3 普通用户功能需求
- Markdoown文本：可输入、预览符合Markdown语法的文本；       
- 导出文件：可输入、更改Markdown文件的保存目录；        

### 3.3 功能模块划分
- 用户输入：用户进入Markdown编辑器，并输入符合Markdown文本；        
- 语法转换：将用户输入的Markdown按照正确的语法编译并显示预览；         
- 导出文件：根据用户的保存目录，导出Markdown格式文件；          

### 3.4 系统流程分析
Markdown Editor使用时用户需要进行输入，输入后可以进行Markdown文本的转换和预览，以及导出文件等操作，系统总体使用流程如下图。         
![YuHang](https://github.com/YuHang0121151624/Markdown-Editor-01/blob/master/img/8.jpg)   

### 3.5 HIPO图
HIPO图如下,该图增加了系统的可追踪性。
HIPO图中的每张IPO图内都明显地标出了它所描绘的模块在层次图中的编号，以便追踪了解这个模块在软件结构中的位置。
![ZhangYinda](https://github.com/YuHang0121151624/Markdown-Editor-01/blob/master/img/11.jpg) 

## 4 数据结构设计
### 4.1 E-R图
![LiShaoang](https://github.com/YuHang0121151624/Markdown-Editor-01/blob/master/img/9.png)        

### 4.2 数据流图
![LiShaoang](https://github.com/YuHang0121151624/Markdown-Editor-01/blob/master/img/10.png)         

## 5 接口设计
### 5.1 用户接口
本产品通过 PC 机进行运行、操作，相应时间由PC机自身处理速度决定。       

### 5.2 硬件接口
对硬件要求较低。        

### 5.3 软件接口
基本没有特殊要求。      

### 5.4 通信接口
无特殊要求。      

## 6 运行设计
### 6.1 运行控制
运行控制将严格按照各模块间的函数调用关系来实现。在各事务中心模块中，需对运行控制进行正确的判断，选择正确的运行控制路径。

### 6.2 运行时间
在软体的需求分析中，对运行时间的要求为必须对用户的操作有较快的反应。
为实现操作的快速响应，我们建议用户使用性能较好的处理器与4G以上的内存运行本Markdown编辑器，以得到最佳的使用体验。
我们建议用户使用较新的运行环境（Windows Vista/7/8/10）运行本编辑器，若操作系统过于老旧或者缺少必要的运行库可能导致编辑器无法正常运行。
由于本Markdown编辑器被设计为轻量化的、离线的软件，因此运行时的网络状况理论上对编辑器的运行没有直接影响。

## 7 出错处理
### 7.1 出错输出信息
程序运行时会出现的错误类型：
- 用户输入错误：用户在编辑区输入的文本不合Markdown语法、输入含有非法字符等。
对于该类型的错误，我们会在每次进行预览时分析输入文本是否含有上述类型的输入错误，若有则根据错误类型，弹出错误提示并给出错误类型，提醒用户改正输入中的错误并重新产生预览。
- 其他错误：由编码问题或其他不可预知的原因产生的错误。
对于该类型的错误，我们在可能出错的模块中放置捕捉运行时错误的逻辑，并在该种错误发生时根据捕捉到的错误类型给出错误提示，我们会重启Markdown编辑器并返回到最后保存的用户文档编辑页面。
同时将该错误的信息记录到运行日志中，便于开发者此后定位并解决该问题。

### 7.2 出错处理对策
为防止7.1中所述“其它错误”的出现所带来的用户数据损失，我们提供保存功能，可以保存用户当前编辑内容的快照，在错误出现导致编辑器重启时保存用户的进度。以此尽量减少用户工作数据的损失。

## 8 安全保密设计
